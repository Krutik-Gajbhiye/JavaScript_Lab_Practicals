<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Art Portfolio Gallery</title>
  <meta name="description" content="Responsive, reactive Art Portfolio Gallery — filter, search, add, favorite, and view art." />
  <style>
    :root{
      --bg:#0f1724; --card:#0b1320; --muted:#9aa7b2; --accent:#ff6b6b; --glass: rgba(255,255,255,0.03);
      --radius:12px; --gap:18px; --max-width:1200px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg,#071021 0%, #081426 50%); color:#e6eef6; -webkit-font-smoothing:antialiased; padding:28px; display:flex; justify-content:center; align-items:flex-start;
    }
    .app{width:100%; max-width:var(--max-width)}

    header{display:flex;gap:12px;align-items:center;margin-bottom:20px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:54px;height:54px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#ffd86b);display:flex;align-items:center;justify-content:center;font-weight:700;color:#071021}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .left-controls{display:flex;gap:12px;align-items:center}

    .search{background:var(--glass);border-radius:12px;padding:8px 12px;display:flex;gap:8px;align-items:center;width:320px}
    .search input{background:transparent;border:0;outline:none;color:inherit;width:100%;font-size:14px}
    .filters{display:flex;gap:8px}
    .chip{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer}
    .chip.active{background:linear-gradient(90deg, rgba(255,107,107,0.12), rgba(255,216,107,0.06));border-color:rgba(255,107,107,0.18)}

    .toolbar{display:flex;gap:8px;align-items:center}
    .btn{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.05);padding:8px 12px;border-radius:10px;cursor:pointer}

    main{margin-top:18px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--gap)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:var(--radius);overflow:hidden;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column}
    .thumb{position:relative;padding-top:66%;background:#06111a}
    .thumb img{position:absolute;left:0;top:0;width:100%;height:100%;object-fit:cover}
    .meta{padding:12px;display:flex;justify-content:space-between;align-items:center}
    .meta .title{font-weight:600}
    .meta .sub{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:8px}
    .icon-btn{background:transparent;border:0;color:var(--muted);cursor:pointer;padding:6px;border-radius:8px}
    .icon-btn.active{color:var(--accent)}

    footer{margin-top:20px;color:var(--muted);font-size:13px}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:24px}
    .modal.open{display:flex}
    .modal .pane{background:linear-gradient(180deg,#071722, #04101a);max-width:900px;width:100%;border-radius:14px;overflow:hidden;display:grid;grid-template-columns:1fr 320px;gap:0;box-shadow:0 10px 40px rgba(2,6,23,0.8)}
    .modal .art{position:relative;padding-top:62%;background:#051018}
    .modal .art img{position:absolute;left:0;top:0;width:100%;height:100%;object-fit:contain}
    .modal .detail{padding:20px;color:var(--muted)}
    .close{position:absolute;right:12px;top:12px}

    /* Add form */
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    form{display:flex;flex-direction:column;gap:8px}
    label{font-size:13px;color:var(--muted)}
    input[type="text"],textarea,select{background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit;padding:10px;border-radius:8px;outline:none}
    input[type="file"]{color:var(--muted)}

    /* Responsive */
    @media (max-width:1000px){
      .grid{grid-template-columns:repeat(3,1fr)}
      .modal .pane{grid-template-columns:1fr 260px}
    }
    @media (max-width:760px){
      header{flex-direction:column;align-items:flex-start}
      .search{width:100%}
      .left-controls{width:100%;justify-content:space-between}
      .grid{grid-template-columns:repeat(2,1fr)}
      .modal .pane{grid-template-columns:1fr}
      .modal .detail{order:2}
    }
    @media (max-width:420px){
      .grid{grid-template-columns:1fr}
    }

    /* tiny utility */
    .muted{color:var(--muted)}
    .center{display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="logo">AP</div>
        <div>
          <h1>Art Portfolio Gallery</h1>
          <p class="lead">Responsive & reactive gallery — filter, search, add & favorite works</p>
        </div>
      </div>
      <div style="flex:1"></div>
      <div class="toolbar">
        <button class="btn" id="open-add">+ Add Art</button>
        <button class="btn" id="reset-sample">Reset Sample</button>
      </div>
    </header>

    <section class="controls">
      <div class="left-controls">
        <div class="search" role="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.5"></circle></svg>
          <input id="q" placeholder="Search by title, artist or tag..." />
        </div>
        <div class="filters" id="filters" aria-label="Categories"></div>
      </div>

      <div class="right-controls">
        <div class="chip" id="sort">Sort: Newest</div>
      </div>
    </section>

    <main>
      <div id="gallery" class="grid" aria-live="polite"></div>
      <div style="height:12px"></div>
      <div class="panel" style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between">
        <div class="muted">Tip: Click any artwork to open viewer. Favorites are saved locally.</div>
        <div class="muted">Built with plain HTML / CSS / JS — drop-in and customize.</div>
      </div>

      <footer>
        <small>© <span id="year"></span> Art Portfolio Gallery — demo. Data stored in browser (localStorage).</small>
      </footer>
    </main>

    <!-- Modal viewer -->
    <div class="modal" id="modal" aria-hidden="true">
      <div class="pane" role="dialog" aria-modal="true">
        <div class="art" id="modal-art">
          <button class="btn close" id="modal-close">Close</button>
        </div>
        <div class="detail">
          <h2 id="modal-title"></h2>
          <div class="muted" id="modal-artist"></div>
          <p id="modal-desc" style="margin-top:12px"></p>
          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <button class="btn" id="modal-fav">♡ Favorite</button>
            <button class="btn" id="modal-download">Download Image</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add panel modal (simple) -->
    <div class="modal" id="addModal" aria-hidden="true">
      <div class="pane" style="max-width:720px;padding:18px;grid-template-columns:1fr">
        <div>
          <h3>Add new artwork</h3>
          <form id="addForm">
            <label>Title</label>
            <input type="text" id="a_title" required />
            <label>Artist</label>
            <input type="text" id="a_artist" />
            <label>Image URL (or base64)</label>
            <input type="text" id="a_image" placeholder="https://...jpg" required />
            <label>Category / Tag (comma-separated)</label>
            <input type="text" id="a_tags" placeholder="painting,abstract" />
            <label>Description</label>
            <textarea id="a_desc" rows="3"></textarea>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" type="submit">Add to Gallery</button>
              <button class="btn" type="button" id="add-cancel">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

  </div>

  <script>
    // --- Data & storage ---
    const SAMPLE = [
      {id:'a1',title:'Monsoon Rhapsody',artist:'Neha Patil',tags:['painting','landscape'],img:'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
      {id:'a2',title:'City Lines',artist:'Ravi Kulkarni',tags:['digital','architecture'],img:'https://images.unsplash.com/photo-1494526585095-c41746248156?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
      {id:'a3',title:'Silent Forest',artist:'Asha Rao',tags:['photography','nature'],img:'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
      {id:'a4',title:'Amber Light',artist:'Siddharth',tags:['painting','abstract'],img:'https://images.unsplash.com/photo-1526318472351-c75fcf070f3f?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
      {id:'a5',title:'Frame of Mind',artist:'Priya Deshmukh',tags:['mixed','portrait'],img:'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
      {id:'a6',title:'Neon Alley',artist:'Karan',tags:['digital','street'],img:'https://images.unsplash.com/photo-1509395176047-4a66953fd231?q=80&w=1200&auto=format&fit=crop&crop=entropy'},
    ];

    const lsKey = 'ap_gallery_v1';
    let state = {items:[],query:'',filter:'all',sort:'newest',fav:new Set()};

    function load(){
      const raw = localStorage.getItem(lsKey);
      if(raw){
        try{ const parsed = JSON.parse(raw); state.items = parsed.items||SAMPLE.slice(); state.fav = new Set(parsed.fav||[]); }catch(e){state.items=SAMPLE.slice();}
      }else{state.items=SAMPLE.slice();}
      renderFilters(); render();
    }
    function save(){
      localStorage.setItem(lsKey, JSON.stringify({items:state.items,fav:[...state.fav]}));
    }

    // --- Render ---
    const gallery = document.getElementById('gallery');
    const filtersEl = document.getElementById('filters');
    const qEl = document.getElementById('q');
    const yearEl = document.getElementById('year'); yearEl.textContent = new Date().getFullYear();

    function uniqueTags(){
      const s = new Set(); state.items.forEach(it=> (it.tags||[]).forEach(t=>s.add(t.toLowerCase())) ); return Array.from(s).sort();
    }
    function renderFilters(){
      const tags = uniqueTags(); filtersEl.innerHTML = '';
      const all = document.createElement('div'); all.className='chip '+(state.filter==='all'?'active':''); all.textContent='All'; all.onclick=()=>{state.filter='all';render();renderFilters()}; filtersEl.appendChild(all);
      tags.forEach(t=>{const d=document.createElement('div');d.className='chip '+(state.filter===t?'active':'');d.textContent=t;d.onclick=()=>{state.filter=t;render();renderFilters()};filtersEl.appendChild(d)});
    }

    function matches(item){
      const q = state.query.trim().toLowerCase();
      if(q){
        const hay = (item.title+' '+(item.artist||'')+' '+(item.tags||[]).join(' ')).toLowerCase();
        if(!hay.includes(q)) return false;
      }
      if(state.filter!=='all'){
        if(!((item.tags||[]).map(x=>x.toLowerCase()).includes(state.filter))) return false;
      }
      return true;
    }

    function render(){
      gallery.innerHTML='';
      let list = state.items.slice();
      if(state.sort==='newest') list = list.reverse();
      list = list.filter(matches);
      if(list.length===0){gallery.innerHTML='<div class="panel center" style="padding:36px;grid-column:1/-1">No artworks found — try a broader search or add new work.</div>'; return}

      list.forEach(it=>{
        const card = document.createElement('article'); card.className='card'; card.tabIndex=0;
        const thumb = document.createElement('div'); thumb.className='thumb';
        const img = document.createElement('img'); img.loading='lazy'; img.alt=it.title+' by '+(it.artist||''); img.src=it.img;
        thumb.appendChild(img);
        card.appendChild(thumb);
        const meta = document.createElement('div'); meta.className='meta';
        const left = document.createElement('div'); left.innerHTML=`<div class="title">${it.title}</div><div class="sub">${it.artist||''}</div>`;
        const right = document.createElement('div'); right.className='actions';
        const view = document.createElement('button'); view.className='icon-btn'; view.innerHTML='View'; view.onclick=()=>openModal(it.id);
        const fav = document.createElement('button'); fav.className='icon-btn '+(state.fav.has(it.id)?'active':''); fav.innerHTML='♥'; fav.onclick=(e)=>{e.stopPropagation(); toggleFav(it.id,fav)};
        right.appendChild(view); right.appendChild(fav);
        meta.appendChild(left); meta.appendChild(right);
        card.appendChild(meta);
        card.onclick=()=>openModal(it.id);
        card.onkeypress=(e)=>{ if(e.key==='Enter') openModal(it.id)};
        gallery.appendChild(card);
      });
    }

    // --- Modal ---
    const modal = document.getElementById('modal');
    const modalArt = document.getElementById('modal-art');
    const modalTitle = document.getElementById('modal-title');
    const modalArtist = document.getElementById('modal-artist');
    const modalDesc = document.getElementById('modal-desc');
    const modalFav = document.getElementById('modal-fav');
    const modalDownload = document.getElementById('modal-download');
    let modalCurrent = null;

    function openModal(id){
      const it = state.items.find(x=>x.id===id); if(!it) return;
      modalCurrent = it;
      modal.classList.add('open'); modal.setAttribute('aria-hidden','false');
      modalArt.innerHTML = '';
      const img = document.createElement('img'); img.alt = it.title; img.src = it.img; modalArt.appendChild(img);
      modalTitle.textContent = it.title; modalArtist.textContent = it.artist || '';
      modalDesc.textContent = it.desc || (it.tags?('Tags: '+it.tags.join(', ')):'');
      modalFav.textContent = state.fav.has(it.id)?'♥ Favorited':'♡ Favorite'; modalFav.className = state.fav.has(it.id)?'btn active btn':'btn';
      modalDownload.onclick = ()=>{ downloadImage(it.img, it.title) };
      // trap focus (simple)
      setTimeout(()=>document.getElementById('modal-close').focus(),50);
    }
    document.getElementById('modal-close').onclick = ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); modalCurrent=null };
    modalFav.onclick = ()=>{ if(!modalCurrent) return; toggleFav(modalCurrent.id, modalFav); }

    function downloadImage(url,title){
      // create link and click
      const a = document.createElement('a'); a.href = url; a.download = (title||'image') + '.jpg'; document.body.appendChild(a); a.click(); a.remove();
    }

    function toggleFav(id,btn){
      if(state.fav.has(id)) state.fav.delete(id); else state.fav.add(id);
      save(); render(); if(btn){ btn.classList.toggle('active'); }
    }

    // --- Add form ---
    const addModal = document.getElementById('addModal');
    document.getElementById('open-add').onclick = ()=>{ addModal.classList.add('open'); addModal.setAttribute('aria-hidden','false'); setTimeout(()=>document.getElementById('a_title').focus(),50) };
    document.getElementById('add-cancel').onclick = ()=>{ addModal.classList.remove('open'); addModal.setAttribute('aria-hidden','true') };
    document.getElementById('addForm').onsubmit = (e)=>{
      e.preventDefault();
      const item = {
        id: 'id'+Math.random().toString(36).slice(2,9),
        title: document.getElementById('a_title').value.trim(),
        artist: document.getElementById('a_artist').value.trim(),
        img: document.getElementById('a_image').value.trim(),
        tags: document.getElementById('a_tags').value.split(',').map(s=>s.trim()).filter(Boolean),
        desc: document.getElementById('a_desc').value.trim()
      };
      state.items.push(item);
      save(); renderFilters(); render(); addModal.classList.remove('open'); addModal.setAttribute('aria-hidden','true'); e.target.reset();
    }

    // --- Controls ---
    qEl.oninput = (e)=>{ state.query = e.target.value; render(); };
    document.getElementById('sort').onclick = ()=>{ state.sort = state.sort==='newest'?'oldest':'newest'; document.getElementById('sort').textContent = 'Sort: '+(state.sort==='newest'?'Newest':'Oldest'); render(); };
    document.getElementById('reset-sample').onclick = ()=>{ if(confirm('Replace gallery with sample data?')){ state.items = SAMPLE.slice(); state.fav = new Set(); save(); renderFilters(); render(); } };

    // keyboard escape to close modals
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ if(modal.classList.contains('open')){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true') } if(addModal.classList.contains('open')){ addModal.classList.remove('open'); addModal.setAttribute('aria-hidden','true') } } });

    // small utility: download cross-origin might fail but try
    function isImageURL(s){ return !!s && (s.startsWith('http') || s.startsWith('data:')) }

    load();
  </script>
</body>
</html>
